(self["webpackChunkprimordial"]=self["webpackChunkprimordial"]||[]).push([[578],{5189:(e,t,r)=>{"use strict";r.d(t,{Z:()=>d});r(7280),r(5363);var s=r(6249),a=r(589),l=r(52),o=r.n(l),i=r(3701);const n="https://api.primordialconstrucaocivil.com.br/api/v1/",u={headers:{Accept:"application/json"}},d={setHeaders(e=!1){return u.headers["Content-Type"]="application/json",a.Z.getItem("user"),u.headers.Authorization=null,e&&(u.headers["Content-Type"]="multipart/form-data"),u},setResponse(e,t){const r=e.data.payload?e.data.payload:e.data;if(t){if(401===e.status&&window.location.replace("/"),"message"===e.data.type)return i.Z.patternNotify(e.data);if(e.status<200||e.status>299)return i.Z.error("Erro "+e.status+"! Entre em contato se persistir!")}return r},async get(e,t=!0,r=!0){t&&s.Z.show();const a=this.setHeaders(),l=await o().get(n+e,a);return s.Z.hide(),this.setResponse(l,r)},async post(e,t,r=!1,a=!0,l=!0){a&&s.Z.show();const i=this.setHeaders(r),u=await o().post(n+e,t,i);return s.Z.hide(),this.setResponse(u,l)}}},3701:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});var s=r(6417);const a={patternNotify(e){var t=e.text,r="",a="",l=!1;return"error"===e.msgType?(l=!1,r="error",a="negative"):"warning"===e.msgType?(l=!1,r="warning",a="warning"):"success"===e.msgType&&(l=!0,r="done",a="positive"),s.Z.create({message:t,icon:r,color:a}),l},error(e){return s.Z.create({message:e,icon:"error",color:"negative"}),!1},warn(e){return s.Z.create({message:e,icon:"warning",color:"warning"}),!1},success(e){return s.Z.create({message:e,icon:"done",color:"positive"}),!0}}},3578:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>H});var s=r(3673),a=r(2323),l=r(8880);const o={class:"q-pa-md"},i={class:"row justify-center q-col-gutter-y-md"},n=(0,s.Wm)("div",{class:"col-12 text-h6 text-center text-grey-5 text-weight-light"}," Usuários cadastrados ",-1),u={class:"row "},d={class:"col-8 col-md-10 text-h6 text-grey-5 text-weight-light"},c={class:"col-4 col-md-2"},m=(0,s.Uk)(" Visualizar "),p=(0,s.Uk)(" Cadastrar "),g=(0,s.Wm)("span",{class:"text-weight-light"},"Cadastro de usuário",-1),h={class:"row q-col-gutter-sm q-pb-sm"},f={class:"col-12"},w={class:"col-12"},_={class:"col-12"};function b(e,t,r,b,y,W){const Z=(0,s.up)("q-tooltip"),v=(0,s.up)("q-btn"),U=(0,s.up)("q-card-section"),q=(0,s.up)("q-card"),x=(0,s.up)("q-page-sticky"),k=(0,s.up)("q-toolbar-title"),C=(0,s.up)("q-toolbar"),V=(0,s.up)("q-icon"),Q=(0,s.up)("q-input"),T=(0,s.up)("q-separator"),j=(0,s.up)("q-card-actions"),S=(0,s.up)("q-form"),F=(0,s.up)("q-dialog"),O=(0,s.up)("q-page");return(0,s.wg)(),(0,s.j4)(O,null,{default:(0,s.w5)((()=>[(0,s.Wm)("div",o,[(0,s.Wm)("div",i,[n,((0,s.wg)(!0),(0,s.j4)(s.HY,null,(0,s.Ko)(y.tableContent,(e=>((0,s.wg)(),(0,s.j4)("div",{class:"col-12 col-md-7",key:e.usr_idUsr},[(0,s.Wm)(q,{flat:"",class:"bg-grey-3"},{default:(0,s.w5)((()=>[(0,s.Wm)(U,null,{default:(0,s.w5)((()=>[(0,s.Wm)("div",u,[(0,s.Wm)("div",d,(0,a.zw)(e.usr_name),1),(0,s.Wm)("div",c,[(0,s.Wm)(v,{unelevated:"",color:"green",class:"full-width",icon:"remove_red_eye",onClick:t=>W.loadUser(e.usr_idUsr)},{default:(0,s.w5)((()=>[(0,s.Wm)(Z,{"content-class":"bg-green",offset:[10,10],"transition-show":"flip-right","transition-hide":"flip-left"},{default:(0,s.w5)((()=>[m])),_:1})])),_:2},1032,["onClick"])])])])),_:2},1024)])),_:2},1024)])))),128)),(0,s.Wm)(x,{position:"bottom-right",offset:[30,30]},{default:(0,s.w5)((()=>[(0,s.Wm)(v,{onClick:t[1]||(t[1]=e=>y.toolbar=!0),fab:"",icon:"add",color:"green"},{default:(0,s.w5)((()=>[(0,s.Wm)(Z,{"content-class":"bg-green",offset:[10,10],"transition-show":"flip-right","transition-hide":"flip-left",anchor:"center left",self:"center right"},{default:(0,s.w5)((()=>[p])),_:1})])),_:1})])),_:1}),(0,s.Wm)(F,{persistent:"",modelValue:y.toolbar,"onUpdate:modelValue":t[7]||(t[7]=e=>y.toolbar=e)},{default:(0,s.w5)((()=>[(0,s.Wm)(q,{style:{width:"600px","max-width":"100vw"}},{default:(0,s.w5)((()=>[(0,s.Wm)(C,{class:"bg-grey-4 text-black"},{default:(0,s.w5)((()=>[(0,s.Wm)(k,null,{default:(0,s.w5)((()=>[g])),_:1}),(0,s.Wm)(v,{flat:"",round:"",dense:"",icon:"close",onClick:W.resetForm},null,8,["onClick"])])),_:1}),(0,s.Wm)(S,{ref:"userForm",onSubmit:W.createOrUpdate},{default:(0,s.w5)((()=>[(0,s.wy)((0,s.Wm)("input",{type:"hidden","onUpdate:modelValue":t[2]||(t[2]=e=>y.user.usr_idUsr=e),ref:"usr_idUsr"},null,512),[[l.nr,y.user.usr_idUsr]]),(0,s.Wm)(U,{style:{"max-height":"70vh"},class:"scroll"},{default:(0,s.w5)((()=>[(0,s.Wm)("div",h,[(0,s.Wm)("div",f,[(0,s.Wm)(Q,{filled:"",type:"text",modelValue:y.user.usr_name,"onUpdate:modelValue":t[3]||(t[3]=e=>y.user.usr_name=e),label:"Nome",ref:"usr_name",required:"","hide-bottom-space":"",maxlength:"255",rules:[e=>!!e||"Obrigatório"]},{prepend:(0,s.w5)((()=>[(0,s.Wm)(V,{name:"account_circle"})])),_:1},8,["modelValue","rules"])]),(0,s.Wm)("div",w,[(0,s.Wm)(Q,{filled:"",type:"email",modelValue:y.user.usr_email,"onUpdate:modelValue":t[4]||(t[4]=e=>y.user.usr_email=e),label:"E-mail",ref:"usr_email",required:"","hide-bottom-space":"",maxlength:"255",rules:[e=>!!e||"Obrigatório"]},{prepend:(0,s.w5)((()=>[(0,s.Wm)(V,{name:"email"})])),_:1},8,["modelValue","rules"])]),(0,s.Wm)("div",_,[y.user.usr_idUsr?((0,s.wg)(),(0,s.j4)(Q,{key:1,filled:"",type:"text",modelValue:y.user.usr_password,"onUpdate:modelValue":t[6]||(t[6]=e=>y.user.usr_password=e),label:"Nova Senha",ref:"usr_idUsr","hide-bottom-space":"",maxlength:"255"},{prepend:(0,s.w5)((()=>[(0,s.Wm)(V,{name:"enhanced_encryption"})])),_:1},8,["modelValue"])):((0,s.wg)(),(0,s.j4)(Q,{key:0,filled:"",type:"text",modelValue:y.user.usr_password,"onUpdate:modelValue":t[5]||(t[5]=e=>y.user.usr_password=e),label:"Senha","hide-bottom-space":"",ref:"usr_idUsr",required:"",maxlength:"255",rules:[e=>!!e||"Obrigatório"]},{prepend:(0,s.w5)((()=>[(0,s.Wm)(V,{name:"enhanced_encryption"})])),_:1},8,["modelValue","rules"]))])])])),_:1}),(0,s.Wm)(T),(0,s.Wm)(j,{align:"right"},{default:(0,s.w5)((()=>[(0,s.Wm)(v,{flat:"",label:"Fechar",color:"secundary",onClick:W.resetForm},null,8,["onClick"]),(0,s.Wm)(v,{label:"Salvar",color:"green",type:"submit"})])),_:1})])),_:1},8,["onSubmit"])])),_:1})])),_:1},8,["modelValue"])])])])),_:1})}var y=r(5189);r(3701);const W={name:"user",created(){this.listUser()},data(){return{toolbar:!1,filter:"",user:{usr_idUsr:null,usr_name:null,usr_email:null,usr_password:null,usr_status:1},columns:[{name:"usr_idUsr",label:"Id",field:"usr_idUsr",align:"left",sortable:!0},{name:"usr_name",label:"Nome",field:"usr_name",align:"left",sortable:!0},{name:"usr_email",label:"Email",field:"usr_email",align:"right"}],tableContent:[],pagination:{rowsPerPage:10}}},methods:{async createOrUpdate(){await y.Z.post("admin/user/createOrUpdate",this.user),this.listUser(),this.resetForm()},async listUser(){console.log("lansei");const{data:e}=await y.Z.get("admin/user/list");console.log(e),this.tableContent=e},async loadUser(e){const{user:t}=await y.Z.get(`admin/user/${e}`);t&&(this.user=t,this.toolbar=!0)},resetForm(){this.toolbar=!1,this.users=0,this.user={usr_idUsr:null,usr_name:null,usr_email:null,usr_password:null}}}};var Z=r(4379),v=r(151),U=r(5589),q=r(8240),x=r(5528),k=r(1007),C=r(9815),V=r(9570),Q=r(3747),T=r(5269),j=r(1206),S=r(4554),F=r(5869),O=r(9367),N=r(7518),E=r.n(N);W.render=b;const H=W;E()(W,"components",{QPage:Z.Z,QCard:v.Z,QCardSection:U.Z,QBtn:q.Z,QTooltip:x.Z,QPageSticky:k.Z,QDialog:C.Z,QToolbar:V.Z,QToolbarTitle:Q.Z,QForm:T.Z,QInput:j.Z,QIcon:S.Z,QSeparator:F.Z,QCardActions:O.Z})}}]);